<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/html5reset.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <title>Travel</title>
</head>
<body>
    <header>
        <a class = "skip-link" href = "#main">Skip to Main Content</a>
        <nav>
            <a class = "ccp-logo" href="/"><img src = "/static/images/ccp_logo.png" alt = "CCP Logo"/></a>
            <ul>
                <li><a href = "/">Home</a></li>
                <li><a href = "/pets/">Pets</a></li>
                <li><a href = "/recipes/">Recipes</a></li>
                <li><a href = "/travel/">Travel</a></li>
                {% if logname == username %}
                <li><a class = "current-page" href = "/users/{{ logname }}"> {{ logname }} </li>
                {% else %}
                <li><a href = "/users/{{ logname }}"> {{ logname }} </li>
                {% endif %}
            </ul>
        </nav>
        <h1 class = "title">Travel</h1>
    </header>
    <main id = "main">
        <h1> {{ username }}</h1>
            {% if logname == username %}
                <a class = "bold" href = "/accounts/edit/">Edit profile</a>
                <form action="{{ url_for('logout') }}" method="post" enctype="multipart/form-data">
                    <input type="submit" name="logout" value="Logout"/>
                </form>
            {% elif relationship %}
                following
                <form action="{{ url_for('following_handler') }}?target=/users/{{ username }}" method="post" enctype="multipart/form-data">
                    <input type="submit" name="unfollow" value="unfollow"/>
                    <input type="hidden" name="username" value="{{ username }}"/>
                    <input type="hidden" name="operation" value="unfollow"/>
                </form>
            {% else %}
                not following
                <form action="{{ url_for('following_handler') }}?target=/users/{{ username }}" method="post" enctype="multipart/form-data">
                    <input type="submit" name="follow" value="follow"/>
                    <input type="hidden" name="username" value="{{ username }}"/>
                    <input type="hidden" name="operation" value="follow"/>
                </form>
            {% endif %}
        <p>
            {% if total_posts == 1 %}
                1 post
            {% else %}
                {{ total_posts }} posts
            {% endif %}
            
            {% if num_followers == 1 %}
                <a class = "bold" href = "/users/{{ username }}/followers/">1 follower</a>
            {% else %}
                <a class = "bold" href = "/users/{{ username }}/followers/">{{ num_followers }} followers</a>
            {% endif %}
            
            <a class = "bold" href = "/users/{{ username }}/following/">{{ num_following }} following</a>
        </p>
        <p>{{ fullname }}</p>
        {% if logname == username %}
        <div class = "box">
            <form action="/posts/" method="post" enctype="multipart/form-data">
                <input type="file" name="file" accept="image/*" required/>
                <input type="submit" name="create_post" value="upload new post"/>
                <input type="hidden" name="operation" value="create"/>
            </form>
        </div>
        {% endif %}
        <br>
        {% for post in posts %}
            <a href = "/posts/{{ post.postid }}/"><img src = "/uploads/{{ post.filename }}" alt = "post" width = "250" height = "250"></a>
        {% endfor %}
        {% if total_posts == 0 %}
            <p> No posts yet. </p>
        {% endif %}
    </main>
</body>
</html> 